<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Apartment Ops ‚Äî Profils</title>
    <link rel="stylesheet" href="/dashboard/styles.css" />
    <link rel="stylesheet" href="/dashboard/home.css" />
  </head>
  <body>
    <div class="bg-layer" aria-hidden="true"></div>

    <main class="app-shell">
      <header class="home-hero">
        <div>
          <p class="eyebrow">Apartment Ops</p>
          <h1>Mes profils de recherche</h1>
          <p class="sub">Chaque profil surveille des zones et des crit√®res diff√©rents.</p>
        </div>
        <div class="hero-actions">
          <button id="scan-all-btn" class="btn primary">üîÑ Tout scanner</button>
        </div>
      </header>
      <div id="scan-all-progress" class="scan-all-progress hidden"></div>

      <section id="profiles-grid" class="profiles-grid">
        <p class="loading-msg">Chargement‚Ä¶</p>
      </section>

      <section id="create-section" class="create-section hidden">
        <h2 id="form-title">Nouveau profil</h2>
        <form id="profile-form" class="profile-form" autocomplete="off">
          <input type="hidden" id="edit-slug" value="" />

          <label>
            Titre court
            <input type="text" id="f-title" placeholder="Ex: Vevey et environs" required />
          </label>

          <fieldset class="zones-fieldset">
            <legend>Zones de recherche</legend>
            <div id="zones-list" class="zones-list"></div>
            <div class="zone-add-row">
              <div class="zone-autocomplete-wrap">
                <input type="text" id="zone-search" placeholder="Rechercher une commune‚Ä¶" autocomplete="off" />
                <ul id="zone-suggestions" class="zone-suggestions hidden"></ul>
              </div>
            </div>
          </fieldset>

          <div class="form-row">
            <label>
              Loyer min (CHF)
              <input type="number" id="f-min-rent" value="0" min="0" step="50" />
            </label>
            <label>
              Loyer max (CHF)
              <input type="number" id="f-max-rent" value="1400" min="0" step="50" />
            </label>
            <label>
              Seuil dur (CHF)
              <input type="number" id="f-hard-max" value="1550" min="0" step="50" />
            </label>
            <label>
              Seuil perle (CHF)
              <input type="number" id="f-pearl-max" value="1650" min="0" step="50" />
            </label>
          </div>

          <div class="form-row">
            <label>
              Pi√®ces min
              <input type="number" id="f-min-rooms" value="2" min="1" max="10" step="0.5" />
            </label>
            <label>
              Surface min (m¬≤)
              <input type="number" id="f-min-surface" value="0" min="0" step="5" />
            </label>
            <label>
              Anciennet√© max (jours)
              <input type="number" id="f-max-age" value="30" min="1" max="365" step="1" />
            </label>
          </div>

          <label class="checkbox">
            <input type="checkbox" id="f-allow-missing-surface" /> Inclure les annonces sans surface renseign√©e
          </label>

          <label>
            Adresse de travail (pour calcul distance)
            <div class="zone-autocomplete-wrap">
              <input type="text" id="f-workplace" placeholder="Rechercher une adresse‚Ä¶" autocomplete="off" />
              <ul id="workplace-suggestions" class="zone-suggestions hidden"></ul>
            </div>
          </label>

          <fieldset class="pearl-fieldset">
            <legend>Perles (annonces au-dessus du budget mais int√©ressantes)</legend>
            <label class="checkbox">
              <input type="checkbox" id="f-pearl-enabled" checked /> Activer la d√©tection de perles
            </label>
            <div id="pearl-options" class="pearl-options">
              <div class="form-row">
                <label>
                  Min pi√®ces (perle)
                  <input type="number" id="f-pearl-min-rooms" value="2" min="1" max="10" step="0.5" />
                </label>
                <label>
                  Min surface m¬≤ (perle)
                  <input type="number" id="f-pearl-min-surface" value="50" min="0" step="5" />
                </label>
              </div>
              <label>
                Mots-cl√©s perle <small style="color:var(--muted)">(s√©par√©s par des virgules)</small>
                <input type="text" id="f-pearl-keywords" value="r√©nov√©, balcon, terrasse, vue, quartier paisible, lac, centre" placeholder="r√©nov√©, balcon, terrasse, vue‚Ä¶" />
              </label>
              <label>
                Hits minimum <small style="color:var(--muted)">(combien de mots-cl√©s doivent matcher)</small>
                <input type="number" id="f-pearl-min-hits" value="1" min="1" max="5" step="1" />
              </label>
            </div>
          </fieldset>

          <fieldset class="sources-fieldset">
            <legend>Sources</legend>
            <label class="checkbox"><input type="checkbox" id="s-immobilier" checked /> immobilier.ch</label>
            <label class="checkbox"><input type="checkbox" id="s-flatfox" checked /> flatfox.ch</label>
            <label class="checkbox"><input type="checkbox" id="s-naef" checked /> naef.ch (direct r√©gie)</label>
            <label class="checkbox"><input type="checkbox" id="s-bernard" checked /> bernard-nicod.ch (direct r√©gie)</label>
            <label class="checkbox"><input type="checkbox" id="s-rp-listings" checked /> Retraites Populaires (locations directes)</label>
            <label class="checkbox"><input type="checkbox" id="s-rp-projects" checked /> Retraites Populaires (projets neufs / off-market)</label>
            <label class="checkbox"><input type="checkbox" id="s-anibis" /> anibis.ch</label>
          </fieldset>

          <label class="checkbox">
            <input type="checkbox" id="f-studio" /> Inclure les plans B (studios / en dessous du min. de pi√®ces)
          </label>

          <div class="form-actions">
            <button type="submit" class="btn primary" id="form-submit">Cr√©er le profil</button>
            <button type="button" class="btn ghost" id="form-cancel">Annuler</button>
          </div>
        </form>
      </section>
    </main>

    <script type="module" src="/dashboard/home.js"></script>
  </body>
</html>
